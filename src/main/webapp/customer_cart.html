<html>
    <head>
        <title>Kaas Shop</title>
        <script src ="JS/jquery-3.2.1.min.js"></script>
        <script src ="JS/products.js"></script>
        <link href="CSS/simple.css" rel="stylesheet" />
    </head>

    <body>
        <h2 class="title">Customer Cart</h2>
        <br/><br/><br/><br/>
        
        
      
        <button> <a href="index.html">Naar hoofdscherm</a></button>
        <br/><br/><br/><br/>
        <table id="table_main" class="display" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th align="left">Id</th>
                    <th align="left">TotalPrice</th>
                    <th align="left">Email</th>
                    <th align="left">AfleverAddresId</th>
                    <th align="left">Product</th>
                    <th align="left">Aantal</th>
                    <th align="left">Verwijderen</th>
                </tr>
            </thead>

        </table>
       
        <script>
            $(document).ready(function () {
                   
                $.getJSON('rest/cartsuborders', function (data) {
                    var datarow = " ";
                    var rowindex = 0;
                    
                    $.each(data, function (key, value) {
                        datarow += ' <tr>';
                        datarow += ' <td align=/"left/">' + value.cartId.id + ' </td>';
                        datarow += ' <td align=/"left/">' + value.subTotal + ' </td>';
                        datarow += ' <td align=/"left/">' + value.cartId.userId.email + ' </td>';
                        datarow += ' <td align=/"left/">' + value.cartId.deliveryAddressId.zipCode 
                                   + ' ' + value.cartId.deliveryAddressId.number 
                                   + ' ' + value.cartId.deliveryAddressId.numAddition + '</td>';
                        datarow += ' <td align=/"left/">' + value.productId.name + ' </td>';
                        datarow += ' <td align=/"left/">' + value.productId.quantity + ' </td>';
                        
                        datarow += ' <td align=/"left/" onclick=\"deleteRow(' + value.id + ')\"> <div style="text-align:center; color:red;"> X <div></td> </tr>';
                        rowindex++;
                    });
                    $('#table_main').append(datarow);
                });
            });
            
            
            function deleteRow(id){
                $.ajax({
            type: "DELETE",
            url: "rest/cartsuborders/" + id,
//            dataType: "json", alleen nodig als return data wordt 
            contentType: "application/json",
            success: function () {
                    console.log("nu nog verwijderen");
                window.location.href = "index.html";
            },
            error: function () {
               console.log("mislukt,, sukkel");
            }
        });
                
            }
        </script>

        

    </body>
</html>
